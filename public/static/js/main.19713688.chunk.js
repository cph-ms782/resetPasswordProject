(this["webpackJsonpreset-refresh-client"]=this["webpackJsonpreset-refresh-client"]||[]).push([[0],{21:function(e,t,n){e.exports=n(34)},26:function(e,t,n){},27:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(18),l=n.n(c),o=(n(26),n(27),n(12)),s=n(8),u=n(1),i=n.n(u),p=n(2),m=n(4),f=n(9),b="http://localhost:3000",d=function(e,t){return console.log("configUserAddUser ",e,t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}},h=function(e){return console.log("configUserGetUser ",e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})}},E=function(e){return console.log("configUserForgotPassword ",e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})}},g=function(){return console.log("configOauthLogin "),{method:"POST",headers:{Authorization:"Basic YXBwbGljYXRpb246c2VjcmV0","Content-Type":"application/json"},body:JSON.stringify({grant_type:"password",username:"testuser",password:"password"})}},v=function(e){var t={grant_type:"refresh_token",refresh_token:e};return console.log("configOauthLogin "),{method:"POST",headers:{Authorization:"Basic YXBwbGljYXRpb246c2VjcmV0","Content-Type":"application/json"},body:JSON.stringify(t)}},k=function(){console.log("configOauthClient ");return{method:"POST",headers:{Authorization:"Basic Y29uZmlkZW50aWFsQXBwbGljYXRpb246dG9wU2VjcmV0","Content-Type":"application/json"},body:JSON.stringify({grant_type:"client_credentials"})}},O=function(e){return console.log("configOauthAccess accessToken",e),{method:"GET",headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}}},j=function(){function e(){return(e=Object(p.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("useAccessToken","".concat(b,"/oauth")),n=O(t),console.log("useAccessToken config",n),e.next=5,fetch("".concat(b,"/oauth"),n).then((function(e){return e.text()}));case 5:return r=e.sent,console.log("useAccessToken res",r),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return(t=Object(p.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("clientCreds","".concat(b,"/oauth/token")),t=k(),console.log("clientCreds config",t),e.next=5,fetch("".concat(b,"/oauth/token"),t).then((function(e){return e.json()}));case 5:return n=e.sent,console.log("clientCreds res",n),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function n(){return(n=Object(p.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("refresh","".concat(b,"/oauth/token")),n=v(t),console.log("refresh config",n),e.next=5,fetch("".concat(b,"/oauth/token"),n).then((function(e){return e.json()}));case 5:return r=e.sent,console.log("refresh res",r),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function r(){return(r=Object(p.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("login","".concat(b,"/oauth/token")),t=g(),console.log("login config",t),e.next=5,fetch("".concat(b,"/oauth/token"),t).then((function(e){return e.json()}));case 5:return n=e.sent,console.log("login res",n),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function a(){return(a=Object(p.a)(i.a.mark((function e(t,n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("addUser ",t,n),console.log("URL ","".concat(b,"/user/add-user")),r=d(t,n),console.log("addUser config",r),console.log("addUser URL config","".concat(b,"/user/add-user"),r),e.next=7,fetch("".concat(b,"/user/add-user"),r).then((function(e){return e.json()}));case 7:return a=e.sent,console.log("addUser res",a),e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(){return(c=Object(p.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getUser ",t),n=d(t),e.next=4,fetch("".concat(b,"/user/get-user"),n).then((function(e){return e.json()}));case 4:return r=e.sent,console.log("getUser res",r),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=Object(p.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getUserToken ",t),n=h(t),e.next=4,fetch("".concat(b,"/user/get-user-token"),n).then((function(e){return e.json()}));case 4:return r=e.sent,console.log("getUserToken res",r),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(){return(o=Object(p.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("postforgotPassword ",t),n=E(t),e.next=4,fetch("".concat(b,"/user/forgot-password"),n).then((function(e){return e.json()}));case 4:return r=e.sent,console.log("postforgotPassword res",r),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{login:function(){return r.apply(this,arguments)},refresh:function(e){return n.apply(this,arguments)},useAccessToken:function(t){return e.apply(this,arguments)},clientCreds:function(){return t.apply(this,arguments)},addUser:function(e,t){return a.apply(this,arguments)},getUser:function(e){return c.apply(this,arguments)},getUserToken:function(e){return l.apply(this,arguments)},postforgotPassword:function(e){return o.apply(this,arguments)}}}(),y=function(){var e={email:"",token:"",expiration:"",used:""},t=Object(f.a)({},{email:"",password:""}),n=(Object(f.a)({},e),Object(r.useState)(Object(f.a)({},t))),c=Object(m.a)(n,2),l=c[0],o=c[1],s=Object(r.useState)(Object(f.a)({},t)),u=Object(m.a)(s,2),b=u[0],d=u[1],h=Object(r.useState)(!1),E=Object(m.a)(h,2),g=E[0],v=E[1],k=function(){var e=Object(p.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.getUser(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(p.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.getUserToken(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var t=Object(p.a)(i.a.mark((function t(n){var r,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O(n);case 2:null!=(r=t.sent)?(a={email:r.email,token:r.token,expiration:r.expiration,used:r.used},d(Object(f.a)({},a))):d(Object(f.a)({},e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),w=function(){var e=Object(p.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),j.addUser(l.email,"test"),setTimeout(Object(p.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(l.email);case 2:return(t=e.sent)&&o(t),e.next=6,O(l.email);case 6:return n=e.sent,console.log("handleSubmit getToken",n),e.next=10,y(l.email);case 10:case"end":return e.stop()}}),e)}))),2e3);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(p.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,j.postforgotPassword(l.email);case 3:return e.next=5,k(l.email);case 5:return(n=e.sent)&&o(n),e.next=9,y(l.email);case 9:v(!0);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(p.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log("handleUpdateSubmit user.email",l.email),e.next=4,y(l.email);case 4:return e.next=6,k(l.email);case 6:(n=e.sent)&&o(n),v(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return a.a.createElement("div",null,a.a.createElement("form",{onSubmit:w},a.a.createElement("br",null),a.a.createElement("h1",null,"Reset kodeord"),a.a.createElement("h2",null,"Indtast brugbar email til brug ved reset"),a.a.createElement("h2",null,"Tryk p\xe5 knapperne i r\xe6kkef\xf8lge"),a.a.createElement("h2",null,"#3. Opdater kan altid benyttes"),a.a.createElement("h4",null,"OBS: Database bliver lagt ned efter eksamen"),a.a.createElement("label",null,"Email",a.a.createElement("br",null),a.a.createElement("input",{type:"text",id:"email",value:l.email,onChange:function(e){var t=e.target.id;l[t]=e.target.value,o(Object(f.a)({},l))}})),a.a.createElement("br",null),a.a.createElement("br",null),"1.",a.a.createElement("br",null),a.a.createElement("input",{type:"submit",value:"Submit og vent 2 sek"})),a.a.createElement("br",null),a.a.createElement("div",null,a.a.createElement("b",null,"Email:")," ",l.email,a.a.createElement("br",null),a.a.createElement("b",null,"Kodeord:")," ",l.password,a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement("b",null,"Token:")," ",b.token,a.a.createElement("br",null),a.a.createElement("b",null,"Udl\xf8bsdato: "),b.expiration,a.a.createElement("br",null),a.a.createElement("b",null,"Benyttet: "),b.used,a.a.createElement("br",null),a.a.createElement("br",null),"2."," ",a.a.createElement("form",{onSubmit:x},a.a.createElement("input",{type:"submit",value:"Reset kodeord"})),g?a.a.createElement("div",null,a.a.createElement("p",null,a.a.createElement("b",null,"Email Sendt. Check email adresse.")),a.a.createElement("p",null,"OBS bem\xe6rk token info ovenover"),a.a.createElement("p",null,"Tiden er UTC")):a.a.createElement("br",null),a.a.createElement("br",null),"3."," ",a.a.createElement("form",{onSubmit:T},a.a.createElement("input",{type:"submit",value:"Opdater"}))))},w=function(){var e=Object(r.useState)(""),t=Object(m.a)(e,2),n=t[0],c=t[1],l=Object(r.useState)(""),o=Object(m.a)(l,2),s=o[0],u=o[1],f=Object(r.useState)(""),b=Object(m.a)(f,2),d=b[0],h=b[1],E=Object(r.useState)(""),g=Object(m.a)(E,2),v=g[0],k=g[1],O=Object(r.useState)(""),y=Object(m.a)(O,2),w=y[0],x=y[1],T=Object(r.useState)(""),S=Object(m.a)(T,2),U=S[0],A=S[1],C=Object(r.useState)(!1),R=Object(m.a)(C,2),N=R[0],B=R[1],P=Object(r.useState)(!1),D=Object(m.a)(P,2),J=D[0],L=D[1],G=Object(r.useState)(""),V=Object(m.a)(G,2),X=V[0],Y=V[1],_=Object(r.useState)(""),z=Object(m.a)(_,2),I=z[0],F=z[1],H=Object(r.useState)(0),M=Object(m.a)(H,2),W=M[0],Z=M[1];Object(r.useEffect)((function(){var e=setInterval((function(){var e=new Date,t=new Date(s);Z(t-e)}),1e3);return function(){clearInterval(e)}}),[s]);var K=function(){var e=Object(p.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,j.login();case 3:n=e.sent,c(n.accessToken),k(n.refreshToken),u(n.accessTokenExpiresAt),x(n.refreshTokenExpiresAt),B(!0),F("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(p.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,j.refresh(v);case 3:r=e.sent,setTimeout((function(){h(n),A(v),c(r.accessToken),k(r.refreshToken),u(r.accessTokenExpiresAt),x(r.refreshTokenExpiresAt),B(!0)}),2e3);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(p.a)(i.a.mark((function e(t){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,j.useAccessToken(n);case 3:r=e.sent,console.log("handleUseNewAccessToken data",r),console.log("handleUseNewAccessToken data.message",r.message);try{a=JSON.parse(r),L(!1),F(a.message),Y(""),B(!1)}catch(c){L(!0),Y(r),F("")}case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(p.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,j.useAccessToken(d);case 3:n=e.sent,console.log("handleOldNewAccessToken data",n),console.log("handleOldNewAccessToken data.message",n.message);try{r=JSON.parse(n),L(!1),F(r.message),Y("")}catch(a){L(!0),Y(n),F("")}case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return a.a.createElement("div",null,a.a.createElement("h2",null,"Login og refresh for at holde login status"),a.a.createElement("div",{style:{fontSize:"9px"}},a.a.createElement("p",null,'Tryk "Login", derefter pr\xf8v de to "Benyt Access Token" knapper '),a.a.createElement("p",null,'Pr\xf8v "Refresh", derefter pr\xf8v de to knapper igen.'),a.a.createElement("p",null,"Access token har her en levetid p\xe5 15 sekunder"),a.a.createElement("p",null,"Refresh token har en levetid p\xe5 to uger")),a.a.createElement("form",{onSubmit:K},a.a.createElement("input",{type:"submit",value:"Login"})),a.a.createElement("form",{onSubmit:Q},a.a.createElement("input",{type:"submit",value:"Refresh og vent 2 sekunder"})),a.a.createElement("h2",null,"Status:"),N?a.a.createElement("p",null,"Logget ind i ",Math.floor(W/1e3)," sekunder"):a.a.createElement("p",null,"Logget ud"),J&&a.a.createElement("p",null,X),I&&a.a.createElement("p",null,I),a.a.createElement("form",{onSubmit:q},a.a.createElement("input",{type:"submit",value:"Benyt Access Token"})),a.a.createElement("b",null,"Access Token"),a.a.createElement("br",null),n,a.a.createElement("br",null),a.a.createElement("b",null,"Access Token udl\xf8ber (UTC tid)"),a.a.createElement("br",null),s,a.a.createElement("br",null),a.a.createElement("b",null,"Refresh Token"),a.a.createElement("br",null),v,a.a.createElement("br",null),a.a.createElement("b",null,"Refresh Token udl\xf8ber (UTC tid)"),a.a.createElement("br",null),w,a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement("form",{onSubmit:$},a.a.createElement("input",{type:"submit",value:"Benyt det gamle Access Token"})),a.a.createElement("b",null,"Gammelt Access Token"),a.a.createElement("br",null),d,a.a.createElement("br",null),a.a.createElement("b",null,"Gammelt Refresh Token"),a.a.createElement("br",null),U,a.a.createElement("br",null))};function x(){return a.a.createElement("div",null,a.a.createElement("h2",null,"Token testbed"),a.a.createElement("br",null),a.a.createElement("h3",null,"Reset menu"),a.a.createElement("p",null,"Reset kodeord"),a.a.createElement("br",null),a.a.createElement("h3",null,"Refresh Token menu"),a.a.createElement("p",null,"Hold login i live"),a.a.createElement("br",null))}function T(){return a.a.createElement(o.a,null,a.a.createElement("div",null,a.a.createElement("ul",{className:"header"},a.a.createElement("li",null,a.a.createElement(o.b,{exact:!0,activeClassName:"selected",to:"/"},"Home")),a.a.createElement("li",null,a.a.createElement(o.b,{exact:!0,activeClassName:"selected",to:"/reset"},"Reset")),a.a.createElement("li",null,a.a.createElement(o.b,{exact:!0,activeClassName:"selected",to:"/refresh"},"Refresh"))),a.a.createElement("hr",null),a.a.createElement("div",{className:"content"},a.a.createElement(s.c,null,a.a.createElement(s.a,{exact:!0,path:"/"},a.a.createElement(x,null)),a.a.createElement(s.a,{path:"/reset"},a.a.createElement(y,null)),a.a.createElement(s.a,{path:"/refresh"},a.a.createElement(w,null))))))}l.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(T,null)),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.19713688.chunk.js.map